<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homie Expiry Pro</title>
    
    <link rel="apple-touch-icon" href="icon.png">
    <link rel="icon" type="image/png" href="icon.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="HomieCalc">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <style>
        body { 
            background: #000; /* Backup color */
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background 2s ease-in-out; /* Smooth nature fade */
            color: #fff; 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 10px;
            margin: 0; 
            min-height: 100vh;
        }

        /* Glassmorphism Containers */
        .header-container, .calc-section, .day-box {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 95%;
            max-width: 850px;
            padding: 15px;
            margin-top: 20px;
            border-radius: 20px;
            box-sizing: border-box;
        }

        .profile-pic {
            width: 65px; height: 65px;
            border-radius: 50%;
            border: 2px solid #00ff88;
            box-shadow: 0 0 15px #00ff88;
        }

        .banner-wrapper {
            flex: 1;
            margin: 0 20px;
            overflow: hidden;
            white-space: nowrap;
            background: rgba(0, 255, 136, 0.05);
            border-radius: 10px;
            padding: 8px 0;
            border: 1px solid rgba(0, 255, 136, 0.1);
        }

        .scrolling-text {
            display: inline-block;
            font-weight: bold;
            color: #00ff88;
            font-size: 14px;
            letter-spacing: 2px;
            animation: scroll-left 30s linear infinite;
        }

        @keyframes scroll-left {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .weather-section { text-align: right; min-width: 90px; }
        #homie-temp { font-size: 24px; font-weight: bold; color: #00ff88; }
        #homie-vibe { font-size: 11px; color: #ffcc00; font-weight: bold; }

        .main-title { 
            font-size: clamp(22px, 8vw, 34px); 
            font-weight: 900; margin: 25px 0;
            text-shadow: 0 0 10px rgba(0,255,136,0.5);
        }

        .controls { 
            display: flex; width: 95%; max-width: 500px; 
            justify-content: space-between; align-items: center; gap: 10px; 
        }

        .btn { 
            background: rgba(255,255,255,0.1); border: 1px solid #444; color: #fff; 
            padding: 12px 20px; border-radius: 12px; cursor: pointer; font-weight: bold;
            transition: 0.3s;
        }
        .btn:hover { background: #00ff88; color: #000; transform: scale(1.05); }

        .calendar-grid { 
            display: grid; grid-template-columns: repeat(7, 1fr); 
            gap: 8px; width: 95%; max-width: 600px; margin-top: 20px;
        }

        .day-box { padding: 10px 2px; border-radius: 12px; text-align: center; }
        .date { font-size: 18px; font-weight: bold; }
        .julian { font-size: 11px; color: #ffcc00; font-family: monospace; }
        .today { border: 2px solid #00ff88; background: rgba(0, 255, 136, 0.2); }

        .calc-section { 
            padding: 20px; border-radius: 25px; width: 95%; 
            max-width: 550px; margin-top: 30px; border: 1px solid rgba(0, 255, 136, 0.4);
        }

        .calc-grid { display: flex; flex-direction: column; gap: 15px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; color: #00ff88; }
        
        input { 
            background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.2); 
            color: #fff; padding: 15px; border-radius: 12px; font-size: 16px; width: 100%; box-sizing: border-box;
        }
        input:focus { border-color: #00ff88; outline: none; }

        #result { margin-top: 25px; padding: 15px; border-radius: 15px; background: rgba(0,0,0,0.3); text-align: center; }

        @media (min-width: 600px) { .calc-grid { flex-direction: row; } }
    </style>
</head>
<body>

    <div class="header-container">
        <div class="profile-section">
            <img src="icon.png" class="profile-pic" alt="Homie Face">
        </div>

        <div class="banner-wrapper">
            <div class="scrolling-text">
                üî• JUST DO IT... üí™ YOU CAN DO IT... üèÅ THE GRIND NEVER STOPS... üîã STAY HUNGRY... üíª BELIEVE IN THE CODE... üñ•Ô∏è MSI POWER... üå≤ NATURE VIBES... üí∞ HUSTLE DAILY... üõ†Ô∏è BUILDING THE FUTURE... ‚úÖ VIBE CHECK PASSED... üíé STAY SHARP...
            </div>
        </div>

        <div class="weather-section">
            <div id="homie-temp">--¬∞C</div>
            <div id="homie-vibe">Hustle. üöÄ</div>
        </div>
    </div>

    <div class="main-title">
        üëë HOMIE <span style="color: #00ff88;">EXPIRY</span> CALCULATOR üìÖ
    </div>

    <div class="controls">
        <button class="btn" onclick="changeMonth(-1)">‚¨ÖÔ∏è PREV</button>
        <div id="monthName" style="font-weight:bold; color:#00ff88;">MONTH YEAR</div>
        <button class="btn" onclick="changeMonth(1)">NEXT ‚û°Ô∏è</button>
    </div>

    <div id="calendar" class="calendar-grid"></div>

    <div class="calc-section">
        <div class="calc-grid">
            <div>
                <label>üèóÔ∏è Production Date:</label>
                <input type="date" id="prodDate" oninput="calculateExpiry()">
            </div>
            <div>
                <label>‚è≥ Shelf Life (Months):</label>
                <input type="number" id="monthsToAdd" placeholder="e.g. 12" oninput="calculateExpiry()">
            </div>
        </div>
        <div id="result">‚öôÔ∏è Enter info to calculate...</div>
    </div>

    <script>
        let viewDate = new Date();
        document.getElementById('prodDate').valueAsDate = new Date();

        // 1. Julian Date Logic
        function getJulian(date) {
            const start = new Date(date.getFullYear(), 0, 0);
            const diff = date - start;
            return Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(3, '0');
        }

        // 2. Background Rotator
        function changeBackground() {
            const images = [
                'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1501854140801-50d01698950b?auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?auto=format&fit=crop&w=1920&q=80',
                'https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?auto=format&fit=crop&w=1920&q=80'
            ];
            const randomImage = images[Math.floor(Math.random() * images.length)];
            document.body.style.backgroundImage = `url('${randomImage}')`;
        }
        setInterval(changeBackground, 10000); // 10s rotation
        changeBackground();

        // 3. Expiry Logic
        function calculateExpiry() {
            const startInput = document.getElementById('prodDate').value;
            const months = parseInt(document.getElementById('monthsToAdd').value);
            if (startInput && !isNaN(months)) {
                let parts = startInput.split('-');
                let d = new Date(parts[0], parts[1]-1, parts[2]);
                d.setMonth(d.getMonth() + months);
                if (d.getDate() != parts[2]) d.setDate(0); 
                document.getElementById('result').innerHTML = `
                    <span style="color:#00ff88; font-size: 1.2em;">‚úÖ Expires on:</span><br>
                    <span style="font-size: 1.1em;">üìÖ ${d.toDateString()}</span><br>
                    <span style="color:#ffcc00;">üî¢ Julian Day: ${getJulian(d)}</span>
                `;
            }
        }

        // 4. Calendar Logic
        function renderCalendar() {
            const month = viewDate.getMonth();
            const year = viewDate.getFullYear();
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            document.getElementById('monthName').innerText = "üóìÔ∏è " + viewDate.toLocaleString('default', { month: 'short' }).toUpperCase() + " " + year;
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();

            for (let i = 0; i < firstDay; i++) calendar.appendChild(document.createElement('div'));
            for (let d = 1; d <= daysInMonth; d++) {
                const dateObj = new Date(year, month, d);
                const isToday = d === today.getDate() && month === today.getMonth() && year === today.getFullYear();
                const box = document.createElement('div');
                box.className = `day-box ${isToday ? 'today' : ''}`;
                box.innerHTML = `<div class="date">${d}</div><div class="julian">#${getJulian(dateObj)}</div>`;
                calendar.appendChild(box);
            }
        }

        // 5. Weather Logic
        async function getVibes() {
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const { latitude, longitude } = pos.coords;
                const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`);
                const data = await res.json();
                document.getElementById('homie-temp').innerText = "üå°Ô∏è " + Math.round(data.current_weather.temperature) + "¬∞C";
            }, () => { document.getElementById('homie-temp').innerText = "Vibe ON"; });
        }

        function changeMonth(offset) { viewDate.setMonth(viewDate.getMonth() + offset); renderCalendar(); }
        renderCalendar();
        getVibes();
    </script>
</body>
</html>
